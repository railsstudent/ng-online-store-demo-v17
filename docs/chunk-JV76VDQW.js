import{M as l,a as o,b as a,ra as d,sa as h}from"./chunk-NEYF6PPY.js";var q=(()=>{let r=class r{constructor(){this.cart=h([]),this.promoCode=h(""),this.discountPercent=d(()=>{let t=this.promoCode();return t==="DEVFESTHK2023"?.1:t==="ANGULARNATION"?.2:0}),this.summary=d(()=>{let t=this.cart().reduce(({quantity:f,subtotal:p},u)=>{let y=f+u.quantity,I=p+u.price*u.quantity;return{quantity:y,subtotal:I}},{quantity:0,subtotal:0}),{subtotal:e,quantity:i}=t,s=e*this.discountPercent(),n=e-s;return{quantity:i,subtotal:e.toFixed(2),discount:s.toFixed(2),total:n.toFixed(2)}})}addItem(t,e){if(this.cart().findIndex(s=>s.id===t.id)>=0){let s=this.cart().map(n=>n.id===t.id?a(o({},n),{quantity:n.quantity+e}):n);this.cart.set(s)}else this.cart.set([...this.cart(),a(o({},t),{quantity:e})])}deleteItem(t){let e=this.cart().filter(i=>i.id!==t);this.cart.set(e)}updateItem(t,e){if(e<=0)this.deleteItem(t);else{let i=this.cart().map(s=>s.id===t?a(o({},s),{quantity:e}):s);this.cart.set(i)}}};r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})();export{q as a};
